# An experimental evaluation of the effect of escape gaps on the quantity, diversity, and size of fish caught in traps in Montserrat
This repository contains code and data for:

Flower, J., Estep, A., James, K., Ramdeen, R., Runge, C.A., Thomas, L., & Lester, S.E. (2021). An experimental evaluation of the effect of escape gaps on the quantity, diversity, and size of fish caught in traps in Montserrat. PLOS ONE 16(12): e0261119. https://doi.org/10.1371/journal.pone.0261119


<div itemscope itemtype="https://schema.org/Person"><a itemprop="sameAs" content="https://orcid.org/0000-0002-6731-8182" href="https://orcid.org/0000-0002-6731-8182" target="orcid.widget" rel="me noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">https://orcid.org/0000-0002-6731-8182</a></div>

## Contents
- `data`: contains experimental data:
  * `traps_data.csv` - original data with each row representing one fish measurement from a trap
  * `traps_hauls.csv` - trap data summarised at the haul level, with each row representing a single haul of a trap
- `functions`: all functions. These will be called from one or more `scripts`.
- `outputs`: contains all outputs from scripts, including figures and csv files.
  * `figures` - figures saved from all scripts except model summaries which are saved in their own folders (see below)
  * `glmer_models` - pdf files of model outputs for all generalized linear mixed effects models (negative binomial distributions) including model diagnostics, selection tables, dot-and-whisker plots of all models, and summaries.
  * `lmm_models` - pdf files of model outputs for all linear mixed effects models including model diagnostics, selection tables, dot-and-whisker plots of all models, and summaries.
  * `response_plots` - response plots, i.e. plots of all response variables (mean fish length, mean total fish biomass, number of fish, and species richness) versus all explanatory variables (experimental or control trap, trap design, location, etc.)
  * `tables` - tables included in the manuscript or as supplementary tables
- `scripts`: all scripts. These receive inputs from `data` and store outputs in `outputs`
  * `body_width_analysis.Rmd` - Comparison of fish caught in control and experimental traps classified by body shape (width). 
  * `catch_characterization_comparison.Rmd` - Basic summaries of the catch data and environmental data, trap haul dates, and catch composition. Test of difference in proportions of each species caught in control and experimental traps.
  * `catch_paired_tests.Rmd` - Comparisons of total number of fish, mean length of fish, total weight of fish (biomass), total number of species (i.e. species richness), and Shannon diversity index per haul in control and experimental traps using only data from trap pairs hauled together. t-tests (parametric) and Wilcoxon-signed rank tests (non-parametric) used.
  * `length_based_analysis.Rmd` - length-frequency plots and Kolomogorov-Smirnov tests for all data, small fish subsets of data, individual species, and long, medium and short soak times. Also compared proportions of catch below Length at maturity in control and experimental traps.
  * `linear_models.Rmd`: this runs linear mixed effects models or generalized linear mixed effects models for mean fish length, biomass, total number of fish, and total number of fish species per haul. It outputs pdf files of model results and diagnostics. Two functions are called to do the actual work: `all_models.R` and `all_models_glmer.R` depending on if it is a LMM or GLMM that is being run. Exploratory plots of all explanatory variables are also generated by this script. All outputs are saved in `outputs`, under folders `glmer_models` (for GLMMs), `lmm_models` (for LMMs), or `response_plots` (for all exploratory plots).


